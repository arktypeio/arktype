import { declare } from "@re-/model"

// Declare the models you will define
export const { define, compile } = declare("user", "group")

import { groupDef } from "./group"
import { userDef } from "./user"

// Creates your space (or tells you which definition you forgot to include)
export const mySpace = compile({ ...userDef, ...groupDef })

// Mouse over "Group" to see the inferred type...
export type Group = typeof mySpace.models

export const fetchGroupData = () => {
    return {
        title: "Type Enjoyers",
        members: [
            {
                name: "Devin Aldai",
                grapes: []
            }
        ]
    }
}

// Try changing the definitions in "group.ts"/"user.ts" or the data in "fetchGroupData"!
export const { error } = mySpace.models.group.validate(fetchGroupData())
