---
import type { Props } from "@astrojs/starlight/props"
import BuiltinSidebar from "@astrojs/starlight/components/Sidebar.astro"
import { experimental_AstroContainer } from "astro/container"

const container = await experimental_AstroContainer.create()
const html = await container.renderToString(BuiltinSidebar, Astro)

const onToggleSrc = `if(!this.open) {
const groupName = this.textContent.trim().split(' ')[0].toLowerCase()
window.location.href = window.location.origin + '/' + groupName
}`.replaceAll("\n", ";")

const newHtml = html.replaceAll(
	/<details (.*?)>/g,
	(match, p1) => `<details ${p1} onclick="${onToggleSrc}">`
)
---

<Fragment set:html={newHtml} />
